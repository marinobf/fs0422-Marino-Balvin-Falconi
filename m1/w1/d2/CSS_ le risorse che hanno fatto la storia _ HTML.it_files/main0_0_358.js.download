"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var Tracker=function(){function Tracker(args){var _this=this;_classCallCheck(this,Tracker),this.gaid=void 0===args.gaid?null:args.gaid,this.selectors=void 0===args.selectors?[]:args.selectors.map((function(selector){return _objectSpread(_objectSpread({},{viewsEnabled:!0}),selector)})),"undefined"==typeof gtag?this.insertGTAG(this.gaid,function(){window.gtag("config",this.gaid,{send_page_view:!1,groups:"blztrkpgn"})}.bind(this)):window.gtag("config",this.gaid,{send_page_view:!1,groups:"blztrkpgn"}),this.IntersectingEventCheck=this.IntersectingEventCheck.bind(this),this.trackEvt=this.trackEvt.bind(this),this.observer=new IntersectionObserver((function(entries){entries.forEach(_this.IntersectingEventCheck)})),this.init()}return _createClass(Tracker,[{key:"IntersectingEventCheck",value:function(entry){if(entry.isIntersecting){var data=JSON.parse(entry.target.dataset.blzTrackingData);this.trackEvt(data.action,data.args,this.gaid),this.observer.unobserve(entry.target)}}},{key:"init",value:function(){var _this2=this;this.selectors.forEach((function(selector){return _this2._initSelector(selector)}))}},{key:"_initSelector",value:function(selector){var _this3=this;if("event"===selector.type){var elements=document.querySelectorAll(selector.selector);[].map.call(elements,(function(element){var args=void 0!==selector.args?selector.args:{event_category:"track"};_this3.initClick(element,selector.name,args),selector.viewsEnabled&&_this3.initView(element,selector.name,args)}))}}},{key:"initView",value:function(element,name,args){void 0===element.dataset.blzTracking&&(element.dataset.blzTrackingData=JSON.stringify({action:name+" view",args:args}),this.observer.observe(element))}},{key:"initClick",value:function(element,name,args){var _this4=this,action=name+" click";element.addEventListener("click",(function(){return _this4.trackEvt(action,args)}))}},{key:"add",value:function(selector,type,name,args,viewsEnabled){var _selector={selector:selector,type:type,name:name,viewsEnabled:void 0===viewsEnabled||viewsEnabled};void 0!==args&&(_selector.args=args),this._initSelector(_selector)}},{key:"trackPV",value:function(args,GAID){var gaid=void 0!==GAID?GAID:this.gaid;if(null!=gaid){var title=null,path=null,currentpath=window.location.pathname+window.location.search+window.location.hash;null!=args?(title=void 0!==args.page_title?args.page_title:document.title,path=void 0!==args.page_path?args.page_path:currentpath,gtag("config",gaid,{page_title:title,page_path:path})):gtag("config",gaid)}}},{key:"trackEvt",value:function(name,args,GAID){var gaid=void 0!==GAID?GAID:this.gaid,evt_args=void 0===args?{}:args;evt_args.send_to=gaid,evt_args.event_callback=function(){}.bind(this),null!=gaid&&void 0!==name&&null!=name&&""!=name&&window.gtag("event",name,evt_args)}},{key:"insertGTAG",value:function(GAID){var callback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},script=document.createElement("script");script.async=!0,script.src="https://www.googletagmanager.com/gtag/js?id=".concat(GAID),script.addEventListener("load",callback);var init=document.createElement("script");init.textContent="\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){ dataLayer.push(arguments); }\n            gtag('set', { 'send_page_view': false });\n            gtag('js', new Date());            \n        ",document.head.appendChild(script),document.head.appendChild(init)}}]),Tracker}();
!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(global.RSVP={})}(this,(function(exports){"use strict";function callbacksFor(object){var callbacks=object._promiseCallbacks;return callbacks||(callbacks=object._promiseCallbacks={}),callbacks}var EventTarget={mixin:function(object){return object.on=this.on,object.off=this.off,object.trigger=this.trigger,object._promiseCallbacks=void 0,object},on:function(eventName,callback){if("function"!=typeof callback)throw new TypeError("Callback must be a function");var allCallbacks=callbacksFor(this),callbacks=allCallbacks[eventName];callbacks||(callbacks=allCallbacks[eventName]=[]),-1===callbacks.indexOf(callback)&&callbacks.push(callback)},off:function(eventName,callback){var allCallbacks=callbacksFor(this);if(callback){var callbacks=allCallbacks[eventName],index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}else allCallbacks[eventName]=[]},trigger:function(eventName,options,label){var callbacks=callbacksFor(this)[eventName];if(callbacks)for(var i=0;i<callbacks.length;i++)(0,callbacks[i])(options,label)}},config={instrument:!1};function configure(name,value){if(2!==arguments.length)return config[name];config[name]=value}EventTarget.mixin(config);var queue=[];function instrument(eventName,promise,child){1===queue.push({name:eventName,payload:{key:promise._guidKey,id:promise._id,eventName:eventName,detail:promise._result,childId:child&&child._id,label:promise._label,timeStamp:Date.now(),error:config["instrument-with-stack"]?new Error(promise._label):null}})&&setTimeout((function(){for(var i=0;i<queue.length;i++){var entry=queue[i],payload=entry.payload;payload.guid=payload.key+payload.id,payload.childGuid=payload.key+payload.childId,payload.error&&(payload.stack=payload.error.stack),config.trigger(entry.name,entry.payload)}queue.length=0}),50)}function resolve$$1(object,label){if(object&&"object"==typeof object&&object.constructor===this)return object;var promise=new this(noop,label);return resolve$1(promise,object),promise}function noop(){}var TRY_CATCH_ERROR={error:null};function getThen(promise){try{return promise.then}catch(error){return TRY_CATCH_ERROR.error=error,TRY_CATCH_ERROR}}var tryCatchCallback=void 0;function tryCatcher(){try{var target=tryCatchCallback;return tryCatchCallback=null,target.apply(this,arguments)}catch(e){return TRY_CATCH_ERROR.error=e,TRY_CATCH_ERROR}}function tryCatch(fn){return tryCatchCallback=fn,tryCatcher}function handleMaybeThenable(promise,maybeThenable,then$$1){if(maybeThenable.constructor===promise.constructor&&then$$1===then&&promise.constructor.resolve===resolve$$1)!function(promise,thenable){1===thenable._state?fulfill(promise,thenable._result):2===thenable._state?(thenable._onError=null,reject(promise,thenable._result)):subscribe(thenable,void 0,(function(value){thenable===value?fulfill(promise,value):resolve$1(promise,value)}),(function(reason){return reject(promise,reason)}))}(promise,maybeThenable);else if(then$$1===TRY_CATCH_ERROR){var error=TRY_CATCH_ERROR.error;TRY_CATCH_ERROR.error=null,reject(promise,error)}else"function"==typeof then$$1?function(promise,thenable,then$$1){config.async((function(promise){var sealed=!1,result=tryCatch(then$$1).call(thenable,(function(value){sealed||(sealed=!0,thenable===value?fulfill(promise,value):resolve$1(promise,value))}),(function(reason){sealed||(sealed=!0,reject(promise,reason))}),"Settle: "+(promise._label||" unknown promise"));if(!sealed&&result===TRY_CATCH_ERROR){sealed=!0;var error=TRY_CATCH_ERROR.error;TRY_CATCH_ERROR.error=null,reject(promise,error)}}),promise)}(promise,maybeThenable,then$$1):fulfill(promise,maybeThenable)}function resolve$1(promise,value){var x,type;promise===value?fulfill(promise,value):(type=typeof(x=value),null===x||"object"!==type&&"function"!==type?fulfill(promise,value):handleMaybeThenable(promise,value,getThen(value)))}function publishRejection(promise){promise._onError&&promise._onError(promise._result),publish(promise)}function fulfill(promise,value){undefined===promise._state&&(promise._result=value,promise._state=1,0===promise._subscribers.length?config.instrument&&instrument("fulfilled",promise):config.async(publish,promise))}function reject(promise,reason){undefined===promise._state&&(promise._state=2,promise._result=reason,config.async(publishRejection,promise))}function subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers,length=subscribers.length;parent._onError=null,subscribers[length]=child,subscribers[length+1]=onFulfillment,subscribers[length+2]=onRejection,0===length&&parent._state&&config.async(publish,parent)}function publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(config.instrument&&instrument(1===settled?"fulfilled":"rejected",promise),0!==subscribers.length){for(var child=void 0,callback=void 0,result=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?invokeCallback(settled,child,callback,result):callback(result);promise._subscribers.length=0}}function invokeCallback(state,promise,callback,result){var hasCallback="function"==typeof callback,value=void 0;if(value=hasCallback?tryCatch(callback)(result):result,undefined!==promise._state);else if(value===promise)reject(promise,new TypeError("A promises callback cannot return that same promise."));else if(value===TRY_CATCH_ERROR){var error=TRY_CATCH_ERROR.error;TRY_CATCH_ERROR.error=null,reject(promise,error)}else hasCallback?resolve$1(promise,value):1===state?fulfill(promise,value):2===state&&reject(promise,value)}function then(onFulfillment,onRejection,label){var state=this._state;if(1===state&&!onFulfillment||2===state&&!onRejection)return config.instrument&&instrument("chained",this,this),this;this._onError=null;var child=new this.constructor(noop,label),result=this._result;if(config.instrument&&instrument("chained",this,child),undefined===state)subscribe(this,child,onFulfillment,onRejection);else{var callback=1===state?onFulfillment:onRejection;config.async((function(){return invokeCallback(state,child,callback,result)}))}return child}var Enumerator=function(){function Enumerator(Constructor,input,abortOnReject,label){this._instanceConstructor=Constructor,this.promise=new Constructor(noop,label),this._abortOnReject=abortOnReject,this._isUsingOwnPromise=Constructor===Promise,this._isUsingOwnResolve=Constructor.resolve===resolve$$1,this._init.apply(this,arguments)}return Enumerator.prototype._init=function(Constructor,input){var len=input.length||0;this.length=len,this._remaining=len,this._result=new Array(len),this._enumerate(input)},Enumerator.prototype._enumerate=function(input){for(var length=this.length,promise=this.promise,i=0;undefined===promise._state&&i<length;i++)this._eachEntry(input[i],i,!0);this._checkFullfillment()},Enumerator.prototype._checkFullfillment=function(){if(0===this._remaining){var result=this._result;fulfill(this.promise,result),this._result=null}},Enumerator.prototype._settleMaybeThenable=function(entry,i,firstPass){var c=this._instanceConstructor;if(this._isUsingOwnResolve){var then$$1=getThen(entry);if(then$$1===then&&undefined!==entry._state)entry._onError=null,this._settledAt(entry._state,i,entry._result,firstPass);else if("function"!=typeof then$$1)this._settledAt(1,i,entry,firstPass);else if(this._isUsingOwnPromise){var promise=new c(noop);handleMaybeThenable(promise,entry,then$$1),this._willSettleAt(promise,i,firstPass)}else this._willSettleAt(new c((function(resolve){return resolve(entry)})),i,firstPass)}else this._willSettleAt(c.resolve(entry),i,firstPass)},Enumerator.prototype._eachEntry=function(entry,i,firstPass){null!==entry&&"object"==typeof entry?this._settleMaybeThenable(entry,i,firstPass):this._setResultAt(1,i,entry,firstPass)},Enumerator.prototype._settledAt=function(state,i,value,firstPass){var promise=this.promise;undefined===promise._state&&(this._abortOnReject&&2===state?reject(promise,value):(this._setResultAt(state,i,value,firstPass),this._checkFullfillment()))},Enumerator.prototype._setResultAt=function(state,i,value,firstPass){this._remaining--,this._result[i]=value},Enumerator.prototype._willSettleAt=function(promise,i,firstPass){var _this=this;subscribe(promise,void 0,(function(value){return _this._settledAt(1,i,value,firstPass)}),(function(reason){return _this._settledAt(2,i,reason,firstPass)}))},Enumerator}();function setSettledResult(state,i,value){this._remaining--,this._result[i]=1===state?{state:"fulfilled",value:value}:{state:"rejected",reason:value}}var guidKey="rsvp_"+Date.now()+"-",counter=0;var Promise=function(){function Promise(resolver,label){this._id=counter++,this._label=label,this._state=void 0,this._result=void 0,this._subscribers=[],config.instrument&&instrument("created",this),noop!==resolver&&("function"!=typeof resolver&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Promise?function(promise,resolver){var resolved=!1;try{resolver((function(value){resolved||(resolved=!0,resolve$1(promise,value))}),(function(reason){resolved||(resolved=!0,reject(promise,reason))}))}catch(e){reject(promise,e)}}(this,resolver):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Promise.prototype._onError=function(reason){var _this=this;config.after((function(){_this._onError&&config.trigger("error",reason,_this._label)}))},Promise.prototype.catch=function(onRejection,label){return this.then(void 0,onRejection,label)},Promise.prototype.finally=function(callback,label){var constructor=this.constructor;return"function"==typeof callback?this.then((function(value){return constructor.resolve(callback()).then((function(){return value}))}),(function(reason){return constructor.resolve(callback()).then((function(){throw reason}))})):this.then(callback,callback)},Promise}();function makeObject(_,argumentNames){for(var obj={},length=_.length,args=new Array(length),x=0;x<length;x++)args[x]=_[x];for(var i=0;i<argumentNames.length;i++){obj[argumentNames[i]]=args[i+1]}return obj}function arrayResult(_){for(var length=_.length,args=new Array(length-1),i=1;i<length;i++)args[i-1]=_[i];return args}function wrapThenable(then,promise){return{then:function(onFulFillment,onRejection){return then.call(promise,onFulFillment,onRejection)}}}function denodeify(nodeFunc,options){var fn=function(){for(var l=arguments.length,args=new Array(l+1),promiseInput=!1,i=0;i<l;++i){var arg=arguments[i];if(!promiseInput){if((promiseInput=needsPromiseInput(arg))===TRY_CATCH_ERROR){var error=TRY_CATCH_ERROR.error;TRY_CATCH_ERROR.error=null;var p=new Promise(noop);return reject(p,error),p}promiseInput&&!0!==promiseInput&&(arg=wrapThenable(promiseInput,arg))}args[i]=arg}var promise=new Promise(noop);return args[l]=function(err,val){err?reject(promise,err):void 0===options?resolve$1(promise,val):!0===options?resolve$1(promise,arrayResult(arguments)):Array.isArray(options)?resolve$1(promise,makeObject(arguments,options)):resolve$1(promise,val)},promiseInput?handlePromiseInput(promise,args,nodeFunc,this):handleValueInput(promise,args,nodeFunc,this)};return fn.__proto__=nodeFunc,fn}function handleValueInput(promise,args,nodeFunc,self){if(tryCatch(nodeFunc).apply(self,args)===TRY_CATCH_ERROR){var error=TRY_CATCH_ERROR.error;TRY_CATCH_ERROR.error=null,reject(promise,error)}return promise}function handlePromiseInput(promise,args,nodeFunc,self){return Promise.all(args).then((function(args){return handleValueInput(promise,args,nodeFunc,self)}))}function needsPromiseInput(arg){return null!==arg&&"object"==typeof arg&&(arg.constructor===Promise||getThen(arg))}function all$1(array,label){return Promise.all(array,label)}Promise.cast=resolve$$1,Promise.all=function(entries,label){return Array.isArray(entries)?new Enumerator(this,entries,!0,label).promise:this.reject(new TypeError("Promise.all must be called with an array"),label)},Promise.race=function(entries,label){var promise=new this(noop,label);if(!Array.isArray(entries))return reject(promise,new TypeError("Promise.race must be called with an array")),promise;for(var i=0;undefined===promise._state&&i<entries.length;i++)subscribe(this.resolve(entries[i]),void 0,(function(value){return resolve$1(promise,value)}),(function(reason){return reject(promise,reason)}));return promise},Promise.resolve=resolve$$1,Promise.reject=function(reason,label){var promise=new this(noop,label);return reject(promise,reason),promise},Promise.prototype._guidKey=guidKey,Promise.prototype.then=then;var AllSettled=function(_Enumerator){function AllSettled(Constructor,entries,label){return function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,_Enumerator.call(this,Constructor,entries,!1,label))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AllSettled,_Enumerator),AllSettled}(Enumerator);function allSettled(entries,label){return Array.isArray(entries)?new AllSettled(Promise,entries,label).promise:Promise.reject(new TypeError("Promise.allSettled must be called with an array"),label)}function race$1(array,label){return Promise.race(array,label)}function _possibleConstructorReturn$1(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}AllSettled.prototype._setResultAt=setSettledResult;var PromiseHash=function(_Enumerator){function PromiseHash(Constructor,object){var abortOnReject=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],label=arguments[3];return _possibleConstructorReturn$1(this,_Enumerator.call(this,Constructor,object,abortOnReject,label))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(PromiseHash,_Enumerator),PromiseHash.prototype._init=function(Constructor,object){this._result={},this._enumerate(object)},PromiseHash.prototype._enumerate=function(input){var keys=Object.keys(input),length=keys.length,promise=this.promise;this._remaining=length;for(var key=void 0,val=void 0,i=0;undefined===promise._state&&i<length;i++)val=input[key=keys[i]],this._eachEntry(val,key,!0);this._checkFullfillment()},PromiseHash}(Enumerator);function hash(object,label){return Promise.resolve(object,label).then((function(object){if(null===object||"object"!=typeof object)throw new TypeError("Promise.hash must be called with an object");return new PromiseHash(Promise,object,label).promise}))}var HashSettled=function(_PromiseHash){function HashSettled(Constructor,object,label){return function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,_PromiseHash.call(this,Constructor,object,!1,label))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(HashSettled,_PromiseHash),HashSettled}(PromiseHash);function hashSettled(object,label){return Promise.resolve(object,label).then((function(object){if(null===object||"object"!=typeof object)throw new TypeError("hashSettled must be called with an object");return new HashSettled(Promise,object,!1,label).promise}))}function rethrow(reason){throw setTimeout((function(){throw reason})),reason}function defer(label){var deferred={resolve:void 0,reject:void 0};return deferred.promise=new Promise((function(resolve,reject){deferred.resolve=resolve,deferred.reject=reject}),label),deferred}HashSettled.prototype._setResultAt=setSettledResult;var MapEnumerator=function(_Enumerator){function MapEnumerator(Constructor,entries,mapFn,label){return function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,_Enumerator.call(this,Constructor,entries,!0,label,mapFn))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(MapEnumerator,_Enumerator),MapEnumerator.prototype._init=function(Constructor,input,bool,label,mapFn){var len=input.length||0;this.length=len,this._remaining=len,this._result=new Array(len),this._mapFn=mapFn,this._enumerate(input)},MapEnumerator.prototype._setResultAt=function(state,i,value,firstPass){if(firstPass){var val=tryCatch(this._mapFn)(value,i);val===TRY_CATCH_ERROR?this._settledAt(2,i,val.error,!1):this._eachEntry(val,i,!1)}else this._remaining--,this._result[i]=value},MapEnumerator}(Enumerator);function map(promises,mapFn,label){return"function"!=typeof mapFn?Promise.reject(new TypeError("map expects a function as a second argument"),label):Promise.resolve(promises,label).then((function(promises){if(!Array.isArray(promises))throw new TypeError("map must be called with an array");return new MapEnumerator(Promise,promises,mapFn,label).promise}))}function resolve$2(value,label){return Promise.resolve(value,label)}function reject$2(reason,label){return Promise.reject(reason,label)}function _possibleConstructorReturn$4(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var EMPTY_OBJECT={},FilterEnumerator=function(_MapEnumerator){function FilterEnumerator(){return _possibleConstructorReturn$4(this,_MapEnumerator.apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FilterEnumerator,_MapEnumerator),FilterEnumerator.prototype._checkFullfillment=function(){if(0===this._remaining&&null!==this._result){var result=this._result.filter((function(val){return val!==EMPTY_OBJECT}));fulfill(this.promise,result),this._result=null}},FilterEnumerator.prototype._setResultAt=function(state,i,value,firstPass){if(firstPass){this._result[i]=value;var val=tryCatch(this._mapFn)(value,i);val===TRY_CATCH_ERROR?this._settledAt(2,i,val.error,!1):this._eachEntry(val,i,!1)}else this._remaining--,value||(this._result[i]=EMPTY_OBJECT)},FilterEnumerator}(MapEnumerator);function filter(promises,filterFn,label){return"function"!=typeof filterFn?Promise.reject(new TypeError("filter expects function as a second argument"),label):Promise.resolve(promises,label).then((function(promises){if(!Array.isArray(promises))throw new TypeError("filter must be called with an array");return new FilterEnumerator(Promise,promises,filterFn,label).promise}))}var len=0,vertxNext=void 0;function asap(callback,arg){queue$1[len]=callback,queue$1[len+1]=arg,2===(len+=2)&&scheduleFlush$1()}var browserWindow="undefined"!=typeof window?window:void 0,browserGlobal=browserWindow||{},BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver,isNode="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function useSetTimeout(){return function(){return setTimeout(flush,1)}}var queue$1=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){(0,queue$1[i])(queue$1[i+1]),queue$1[i]=void 0,queue$1[i+1]=void 0}len=0}var channel,iterations,observer,node,nextTick,version,scheduleFlush$1=void 0;isNode?(nextTick=process.nextTick,version=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(version)&&"0"===version[1]&&"10"===version[2]&&(nextTick=setImmediate),scheduleFlush$1=function(){return nextTick(flush)}):BrowserMutationObserver?(iterations=0,observer=new BrowserMutationObserver(flush),node=document.createTextNode(""),observer.observe(node,{characterData:!0}),scheduleFlush$1=function(){return node.data=iterations=++iterations%2}):isWorker?((channel=new MessageChannel).port1.onmessage=flush,scheduleFlush$1=function(){return channel.port2.postMessage(0)}):scheduleFlush$1=void 0===browserWindow&&"function"==typeof require?function(){try{var vertx=Function("return this")().require("vertx");return void 0!==(vertxNext=vertx.runOnLoop||vertx.runOnContext)?function(){vertxNext(flush)}:useSetTimeout()}catch(e){return useSetTimeout()}}():useSetTimeout(),config.async=asap,config.after=function(cb){return setTimeout(cb,0)};var cast=resolve$2,async=function(callback,arg){return config.async(callback,arg)};function on(){config.on.apply(config,arguments)}function off(){config.off.apply(config,arguments)}if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var callbacks=window.__PROMISE_INSTRUMENTATION__;for(var eventName in configure("instrument",!0),callbacks)callbacks.hasOwnProperty(eventName)&&on(eventName,callbacks[eventName])}var rsvp={asap:asap,cast:cast,Promise:Promise,EventTarget:EventTarget,all:all$1,allSettled:allSettled,race:race$1,hash:hash,hashSettled:hashSettled,rethrow:rethrow,defer:defer,denodeify:denodeify,configure:configure,on:on,off:off,resolve:resolve$2,reject:reject$2,map:map,async:async,filter:filter};exports.default=rsvp,exports.asap=asap,exports.cast=cast,exports.Promise=Promise,exports.EventTarget=EventTarget,exports.all=all$1,exports.allSettled=allSettled,exports.race=race$1,exports.hash=hash,exports.hashSettled=hashSettled,exports.rethrow=rethrow,exports.defer=defer,exports.denodeify=denodeify,exports.configure=configure,exports.on=on,exports.off=off,exports.resolve=resolve$2,exports.reject=reject$2,exports.map=map,exports.async=async,exports.filter=filter,Object.defineProperty(exports,"__esModule",{value:!0})}));
/*!
* basket.js
* v0.5.2 - 2015-02-07
* http://addyosmani.github.com/basket.js
* (c) Addy Osmani;  License
* Created by: Addy Osmani, Sindre Sorhus, Andrée Hansson, Mat Scales
* Contributors: Ironsjp, Mathias Bynens, Rick Waldron, Felipe Morais
* Uses rsvp.js, https://github.com/tildeio/rsvp.js
*/
!function(a,b){"use strict";var c=b.head||b.getElementsByTagName("head")[0],d="basket-",e=5e3,f=[],g=function(a,b){try{return localStorage.setItem(d+a,JSON.stringify(b)),!0}catch(c){if(c.name.toUpperCase().indexOf("QUOTA")>=0){var e,f=[];for(e in localStorage)0===e.indexOf(d)&&f.push(JSON.parse(localStorage[e]));return f.length?(f.sort(function(a,b){return a.stamp-b.stamp}),basket.remove(f[0].key),g(a,b)):void 0}return}},h=function(a){var b=new RSVP.Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a),d.onreadystatechange=function(){4===d.readyState&&(200===d.status||0===d.status&&d.responseText?b({content:d.responseText,type:d.getResponseHeader("content-type")}):c(new Error(d.statusText)))},setTimeout(function(){d.readyState<4&&d.abort()},basket.timeout),d.send()});return b},i=function(a){return h(a.url).then(function(b){var c=j(a,b);return a.skipCache||g(a.key,c),c})},j=function(a,b){var c=+new Date;return a.data=b.content,a.originalType=b.type,a.type=a.type||b.type,a.skipCache=a.skipCache||!1,a.stamp=c,a.expire=c+60*(a.expire||e)*60*1e3,a},k=function(a,b){return!a||a.expire-+new Date<0||b.unique!==a.unique||basket.isValidItem&&!basket.isValidItem(a,b)},l=function(a){var b,c,d;if(a.url)return a.key=a.key||a.url,b=basket.get(a.key),a.execute=a.execute!==!1,d=k(b,a),a.live||d?(a.unique&&(a.url+=(a.url.indexOf("?")>0?"&":"?")+"basket-unique="+a.unique),c=i(a),a.live&&!d&&(c=c.then(function(a){return a},function(){return b}))):(b.type=a.type||b.originalType,b.execute=a.execute,c=new RSVP.Promise(function(a){a(b)})),c},m=function(a){var d=b.createElement("script");d.defer=!0,d.text=a.data,c.appendChild(d)},n={"default":m},o=function(a){return a.type&&n[a.type]?n[a.type](a):n["default"](a)},p=function(a){return a.map(function(a){return a.execute&&o(a),a})},q=function(){var a,b,c=[];for(a=0,b=arguments.length;b>a;a++)c.push(l(arguments[a]));return RSVP.all(c)},r=function(){var a=q.apply(null,arguments),b=this.then(function(){return a}).then(p);return b.thenRequire=r,b};a.basket={require:function(){for(var a=0,b=arguments.length;b>a;a++)arguments[a].execute=arguments[a].execute!==!1,arguments[a].once&&f.indexOf(arguments[a].url)>=0?arguments[a].execute=!1:arguments[a].execute!==!1&&f.indexOf(arguments[a].url)<0&&f.push(arguments[a].url);var c=q.apply(null,arguments).then(p);return c.thenRequire=r,c},remove:function(a){return localStorage.removeItem(d+a),this},get:function(a){var b=localStorage.getItem(d+a);try{return JSON.parse(b||"false")}catch(c){return!1}},clear:function(a){var b,c,e=+new Date;for(b in localStorage)c=b.split(d)[1],c&&(!a||this.get(c).expire<=e)&&this.remove(c);return this},isValidItem:null,timeout:5e3,addHandler:function(a,b){Array.isArray(a)||(a=[a]),a.forEach(function(a){n[a]=b})},removeHandler:function(a){basket.addHandler(a,void 0)}},basket.clear(!0)}(this,document);
//# sourceMappingURL=basket.min.js.map
class Page{constructor(dataSelector="[data-container]"){try{this.props=JSON.parse(document.querySelector(dataSelector).dataset.container);var current_content={title:document.title,url:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+window.location.pathname};this.props.contents.unshift(current_content)}catch(e){this.props={error:`${e.message} or selector ${dataSelector} not found `,type:"single",title:"",paged:!1,contents:[{title:document.title,url:window.location.href}],infinite:!1,ajaxSelector:"",appendToRequest:"?is_ajax_request"}}}}
class DynamicDepsLoader{constructor(args={jsdir:"/js/components",cssdir:"/css/components/",js_dep_selector:"[data-js-dependency]",def_js_dep_selector:"[data-js-deferred-dependency]",css_dep_selector:"[data-css-dependency]",nocache:!1}){this.js_dir=args.jsdir,this.css_dir=args.cssdir,this.js_dep_selector=args.js_dep_selector,this.css_dep_selector=args.css_dep_selector,this.def_js_dep_selector=args.def_js_dep_selector,this.nocache=args.nocache,this.ie_fallback=void 0===window.IntersectionObserver,this.head=document.getElementsByTagName("head")[0],this.ie_fallback?this.ie9Deps():this.getDeps()}scanDeferredJS(){let elements=document.querySelectorAll(this.def_js_dep_selector),dependencies=[];for(let i=0;i<elements.length;i++){let item=[],jsdeps=elements[i].dataset.jsDeferredDependency.split(",");delete elements[i].dataset.jsDeferredDependency;for(let j=0;j<jsdeps.length;j++)jsdeps[j].trim()&&item.push({url:this.js_dir+jsdeps[j].trim()});item.length&&dependencies.push(item)}return dependencies}scanJS(){let elements=document.querySelectorAll(this.js_dep_selector),dependencies=[];for(let i=0;i<elements.length;i++){let item=[],jsdeps=elements[i].dataset.jsDependency.split(",");delete elements[i].dataset.jsDependency;for(let j=0;j<jsdeps.length;j++)jsdeps[j].trim()&&item.push({url:this.js_dir+jsdeps[j].trim()});item.length&&dependencies.push(item)}return dependencies}scanCSS(nocache=!1){let dep_els=document.querySelectorAll(this.css_dep_selector),deps=[],urls=[];for(let i=0;i<dep_els.length;i++){let item={url:this.css_dir+dep_els[i].dataset.cssDependency,execute:!1,overwrite:nocache},urltocheck=item.url;-1==urls.indexOf(urltocheck)&&(deps.push(item),urls.push(urltocheck))}return deps}getDeps(){if(this.js_deps=this.scanJS(),this.def_deps=this.scanDeferredJS(),this.css_deps=this.scanCSS(this.nocache),this.css_deps.length&&this.css_deps.forEach((dep=>basket.require(dep).then((responses=>{let css=responses[0].data;this.appendStyleSheet(css)})))),this.js_deps.length)for(var i=0;i<this.js_deps.length;i++)this.require(this.js_deps[i]);this.firstScrollTrigger(function(){if(this.def_deps.length)for(var i=0;i<this.def_deps.length;i++)this.require(this.def_deps[i])}.bind(this))}require(deps){let dep=deps.shift();deps.length?basket.require(dep).then((()=>this.require(deps))):basket.require(dep)}appendStyleSheet(css){let style=document.createElement("style");style.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(style),style.styleSheet?style.styleSheet.cssText=css:"textContent"in style?style.textContent=css:style.appendChild(document.createTextNode(css))}appendInHead(type,url){let element=document.createElement({js:"script",css:"link"}[type]);switch(type){case"css":element.type="text/css",element.rel="stylesheet",element.href=url;break;case"js":element.src=url}this.head.appendChild(element)}ie9Scan(type){var selector={js:this.js_dep_selector,def_js:this.def_js_dep_selector,css:this.css_dep_selector},attribute="data-"+type+"-dependency",depdir={js:this.js_dir,css:this.css_dir},elements=document.querySelectorAll(selector[type]);let dependencies=[];for(let i=0;i<elements.length;i++){let item=[],attribute_content=elements[i].getAttribute(attribute),datadeps=attribute_content.indexOf(",")>-1?attribute_content.split(","):attribute_content;if(elements[i].removeAttribute(attribute),"object"==typeof datadeps)for(var j=0;j<datadeps.length;j++)item.push({url:depdir[type]+datadeps[j].trim()});else item={url:depdir[type]+datadeps.trim()};dependencies.push(item)}return dependencies}ie9Deps(){for(var js_deps=this.ie9Scan("js"),def_js_deps=this.ie9Scan("def_js"),css_deps=this.ie9Scan("css"),i=0;i<css_deps.length;i++)this.appendInHead("css",css_deps[i].url);for(i=0;i<js_deps.length;i++)for(var j=0;j<js_deps[i].length;j++)this.appendInHead("js",js_deps[i][j].url);for(i=0;i<def_js_deps.length;i++)for(j=0;j<def_js_deps[i].length;j++)this.appendInHead("js",def_js_deps[i][j].url)}firstScrollTrigger(callback){var trigger=document.createElement("span");trigger.style.position="absolute",trigger.style.top=document.body.clientHeight+"px",trigger.style.left="0",trigger.style.width="1px",trigger.style.height="1px",document.body.style.position="relative",document.body.appendChild(trigger),new IntersectionObserver(function(entries,observer){entries.forEach(function(entry){entry.isIntersecting&&(callback(),observer.unobserve(trigger))}.bind(this))}.bind(this)).observe(trigger)}}
class InfiniteLoader{constructor(args){this.loading=!1,this.base_url=args.base_url?args.base_url:"/",this.url=args.url?args.url:window.location.href,this.container=args.container?args.container:document.body,this.loadedUrls=new Array,this.maxLoads=args.maxLoads?args.maxLoads:2,this.maxLoadsReached=!1,this.loadCallbackStack=new Array,this.loader=new Loader({onLoad:this.onLoad.bind(this),onError:this.onError.bind(this),onLoading:this.onLoading.bind(this),worker:this.base_url+"scripts/workers/loader.js"}),this._onLoad=args.onLoad?args.onLoad:null,this._onError=args.onError?args.onError:null,this._onLoading=args.onLoading?args.onLoading:null}load(url){return this.maxLoadsReached||null==url||void 0===url||this.loadedUrls.indexOf(url)>=0?null:(this.loadedUrls.push(url),void this.loader.load(url))}onLoad(payload){this.container.insertAdjacentHTML("beforeend",payload),this._onLoad&&this._onLoad(payload),this.loadCallbackStack.forEach((function(callback){callback()})),(this.loadedUrls.length+1)%this.maxLoads||(this.maxLoadsReached=!0,this.onMaxLoads())}onLoading(){this._onLoading&&this._onLoading()}onError(){this._onError&&this._onError(error)}unlockLoader(){this.maxLoadsReached=!1}}
class InfiniteScroll{constructor(page,args){this.page=page,this.container=this.page.props.container?this.page.props.container:args.container?args.container:"body",this.content=this.page.props.content?this.page.props.content:args.content?args.content:"article",this.scroller=args.scroller?args.scroller:new Scroller,this.tracker=args.tracker?args.tracker:new Tracker,this.tracked_content_ids=[0],this.change_addressbar=void 0===args.change_addressbar||args.change_addressbar,this.loadMoreSelector=args.loadMoreSelector?args.loadMoreSelector:"#loadmore",this.current_url=args.url?args.url:-1!=window.location.href.indexOf("refresh_ce")?window.location.href.split("refresh_ce")[0].substr(0,window.location.href.split("refresh_ce")[0].length-1):window.location.href,this.current_content=0,this.loader=new InfiniteLoader({base_url:this.page.base_url?this.page.base_url:"/",container:document.querySelector(this.container),maxLoads:this.page.props.maxLoads?this.page.props.maxLoads:args.maxLoads?args.maxLoads:this.page.props.contents.length,onLoading:function(){document.getElementById("wait-loading").style.display="block"},onLoad:function(){document.getElementById("wait-loading").style.display="none"}}),this.scrollZones=[],this.setScrollZones(),this.triggerElement=null,this.setTriggerElement();const that=this;this.loader.loadCallbackStack.push((function(){that.setScrollZones.call(that)})),this.scroller.actionStack.push(function(){this.setCurrentContent(),this.change_addressbar&&this.setAddressBar(),this.loadNext()}.bind(this))}setScrollZones(){this.scrollZones=[];let contents=document.querySelectorAll(this.content);for(let i=0;i<contents.length;i++)this.scrollZones.push(this.scroller.getPosition(contents[i])-80)}setCurrentContent(){for(var i=0;i<this.scrollZones.length;i++)this.scroller.viewPortPosition>this.scrollZones[i]&&(this.current_content=i)}setAddressBar(){this.current_url!=this.page.props.contents[this.current_content].url&&(window.history.replaceState(null,this.page.props.contents[this.current_content].title,this.page.props.contents[this.current_content].url),document.title=this.page.props.contents[this.current_content].title,this.current_url=this.page.props.contents[this.current_content].url,this.current_tracking_url=window.location.pathname+window.location.search,void 0===this.tracked_content_ids[this.current_content]&&(this.tracker.trackPV({page_title:this.page.props.contents[this.current_content].title,page_path:this.current_tracking_url}),this.tracked_content_ids[this.current_content]=this.current_content))}setTriggerElement(){if(this.loadMoreSelector){var loadMore=document.querySelectorAll(this.loadMoreSelector);loadMore.length&&(this.triggerElement=loadMore[loadMore.length-1]),loadMore=null}}loadNext(){if(!this.loader.loading&&this.triggerElement){let offset=10;if(this.scroller.isInViewPort(this.triggerElement,offset)&&this.current_content<this.page.props.contents.length-1){var loadUrl=this.page.props.contents[this.current_content+1].url;loadUrl+=this.page.props.appendToRequest?this.page.props.appendToRequest:"",this.loader.load(loadUrl)}}}}
class Scroller{constructor(){this._supportPageOffset=void 0!==window.pageYOffset,this._isCSS1Compat="CSS1Compat"===(document.compatMode||""),this.pageHeight=0,this.viewPortHeight=0,this.viewPortPosition=0,this.actionStack=[];const that=this;this.actionStack.push((function(){that.setPageHeight.call(that),that.setViewPortHeight.call(that),that.setViewPortPosition.call(that)}));for(var i=0;i<this.actionStack.length;i++)this.actionStack[i]();this._setScrollEventListener(),this.observer=this._setIntersectionObserver(),this.onInViewPort=new CustomEvent("inviewport")}setPageHeight(){this.pageHeight=this._isCSS1Compat?document.documentElement.scrollHeight:document.body.scrollHeight}setViewPortHeight(){this.viewPortHeight=window.innerHeight}setViewPortPosition(){this.viewPortPosition=parseInt(this._supportPageOffset?window.pageYOffset:this._isCSS1Compat?document.documentElement.scrollTop:document.body.scrollTop,10)}getPosition(element){return element.getBoundingClientRect().top+this.viewPortPosition}getYinViewPort(element){return element.getBoundingClientRect().top}getProgressIn(element){var element_position=this.getPosition(element),zone_height=element.scrollHeight,zone_top=element_position,zone_bottom=element_position+element.scrollHeight,zone_start=element_position-this.viewPortHeight,zone_end=element_position+element.scrollHeight-this.viewPortHeight;if(this.viewPortPosition<zone_start||this.viewPortPosition>zone_bottom)return null;if(this.viewPortPosition>zone_start&&this.viewPortPosition<zone_top)return 0;if(this.viewPortPosition>zone_end&&this.viewPortPosition<zone_bottom)return 100;var covered=this.viewPortPosition-zone_top;return parseInt(100*covered/(zone_height-this.viewPortHeight))}isInViewPort(element,offset=0){return element.getBoundingClientRect().top<this.viewPortHeight+offset&&element.getBoundingClientRect().bottom+offset>0}_setIntersectionObserver(){if("undefined"==typeof IntersectionObserver||!1 in window||!1 in window||!1 in window.IntersectionObserverEntry.prototype)return null;document.body;return window.observerTGTCallbacks||(window.observerTGTCallbacks=[]),this.observerCallbacksID=window.observerTGTCallbacks.length,new IntersectionObserver(this._observerCallback)}onElementInViewport(target,callback,once=!0){null==this.observer?(target.addEventListener("inviewport",callback),this._polyfill(target,callback,once)):(target.setAttribute("data-scroller-observer-callback-id",this.observerCallbacksID),window.observerTGTCallbacks[this.observerCallbacksID++]=callback,this.observer.observe(target))}_polyfill(target,callback,once){this.actionStack.push((()=>{this.isInViewPort(target)&&(target.dispatchEvent(this.onInViewPort),once&&target.removeEventListener("inviewport",callback))}))}_observerCallback(entries,observer){entries.forEach((entry=>{entry.isIntersecting&&(window.observerTGTCallbacks[entry.target.dataset.scrollerObserverCallbackId](),observer.unobserve(entry.target))}))}_setScrollEventListener(){const self=this;window.addEventListener("scroll",(function(e){for(var i=0;i<self.actionStack.length;i++)self.actionStack[i]()}))}}!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(event,params){params=params||{bubbles:!1,cancelable:!1,detail:null};var evt=document.createEvent("CustomEvent");return evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),evt}}();
class Loader{constructor(args){this.loading=!1,this.loader=null,this.loader=this._setWorker(),this.onLoad=void 0!==args&&args.onLoad?args.onLoad:null,this.onError=void 0!==args&&args.onError?args.onError:null,this.onLoading=void 0!==args&&args.onLoading?args.onLoading:null}_setLoaderWorker(){try{if(window.Worker)return new Worker(this.worker)}catch(err){}}_loading(){this.loading=!0,this.onLoading&&this.onLoading()}_error(error){this.loading=!1,this.onError&&this.onError(error)}_loaded(payload){this.loading=!1,this.onLoad&&this.onLoad(payload)}_parallelLoad(url){var load_self=this;if(this.loader)this.loader.onmessage=function(msg){switch(msg.data.type){case"loaded":load_self._loaded.call(load_self,msg.data.payload);break;case"loading":load_self._loading.call(load_self);break;case"error":load_self._error.call(load_self)}},this.loader.postMessage({url:url});else{var oReq=new XMLHttpRequest;oReq.onload=function(response){var payload=this.responseText;load_self._loaded.call(load_self,payload)},oReq.onerror=function(){load_self._error.call(load_self)},oReq.open("GET",url),oReq.send(),load_self._loading.call(load_self)}}load(url){null!=url&&this._parallelLoad(url)}_setWorker(){var blob=new Blob([" onmessage = function(msg) { if(msg.data.url) load(msg.data.url); else postMessage({type : 'error', text : 'no url specified'}); }\n load = function(url) { var oReq = new XMLHttpRequest(); oReq.onload = transferComplete; oReq.onerror = transferFailed; console.log('_b| loading...', url); oReq.open('GET', url); oReq.send(); postMessage({type : 'loading'}); }\n function transferComplete() { console.log('_b| loaded'/*, this*/); postMessage({type: 'loaded', payload : this.response}); }\n function transferFailed() { console.log('_b| load error', this.responseText); postMessage({type: 'error', text : this.response}); }\n"]);return new Worker(window.URL.createObjectURL(blob))}}
class UIActions{constructor(args){this.scroller=void 0!==args.scroller?args.scroller:null,this.infinite=void 0!==args.infinite?args.infinite:null,this.wrapper=document.querySelector(".main-wrapper"),this.navbar=document.querySelector(".navbar"),this.skins_offset=100,this.setMenuButtons(),this.checkSkinEnabled()}checkSkinEnabled(){}setTopBarScrollBehaviour(){this.scroller.viewPortPosition>this.skins_offset?(this.wrapper.classList.add("scroll-offset"),this.navbar.classList.add("scroll-offset","scrolled")):(this.wrapper.classList.remove("scroll-offset"),this.navbar.classList.remove("scroll-offset","scrolled"))}setMenuButtons(){var menu_button=document.querySelector(".menu-icon"),menu_panel=document.querySelector(".menu-panel"),close_search=document.querySelector(".search-panel"),close_searchicon=document.querySelector(".open-search"),topbtn_hide=document.getElementById("topBtn");menu_button.onclick=function(){menu_button.classList.toggle("isOpen"),menu_panel.classList.toggle("open"),document.body.classList.toggle("noscroll"),close_search.classList.remove("open"),'<i class="icon-plus rotate"></i>'===close_searchicon.innerHTML&&(close_searchicon.innerHTML='<i class="icon-search"></i>'),menu_panel.classList.contains("open")?topbtn_hide.classList.add("hidden"):topbtn_hide.classList.remove("hidden")}}}
function Lazy(args){this.options={},this.load=function(entries,observer){entries.forEach((function(entry){if(entry.isIntersecting){var image=entry.target;void 0!==image.dataset.src&&(image.src=image.dataset.src,image.removeAttribute("data-src"))}}))},this.init=function(){this.observer=new IntersectionObserver(this.load,this.options),document.querySelectorAll("[data-src]").forEach(function(image){this.observer.observe(image)}.bind(this))},this.initOldBrowsers=function(){for(var images=document.getElementsByTagName("IMG"),i=0;i<images.length;i++){var image=images[i];image.getAttribute("data-src")&&(image.src=image.getAttribute("data-src"),image.removeAttribute("data-src"))}},"undefined"!=typeof IntersectionObserver?this.init():this.initOldBrowsers()}document.addEventListener("DOMContentLoaded",(function(){new Lazy}));
class Main{constructor(){this.page=new Page,this.sitename="htmlit";this.is_staging=["local.","staging.","preprod."].filter((el=>window.location.hostname.includes(el))).length>0,this.is_standalone=["localhost","ngrok.io","loca.lt","static"].filter((el=>window.location.hostname.includes(el))).length>0,this.is_prod=!this.is_staging&&!this.is_standalone,this.adblock=this.isAdBlocked(),this.isMobile=this.isMobile(),this.ieVersion=this.ieVersion(),this.no_ie_fallback=this.ieVersion>10||0==this.ieVersion,this.lazy=new Lazy,this.dynamicDeps=new DynamicDepsLoader({jsdir:this.is_standalone?"/":"/app/themes/"+this.sitename+"/",cssdir:this.is_standalone?"/":"/app/themes/"+this.sitename+"/",js_dep_selector:"[data-js-dependency]",def_js_dep_selector:"[data-js-deferred-dependency]",css_dep_selector:"[data-css-dependency]",ie_fallback:!this.no_ie_fallback,version:this.script_version,nocache:!1}),this.scroller=new Scroller,this.page.base_url=this.is_local||this.is_static||this.is_ngrok?"/":"/app/themes/"+this.sitename+"/",this.tracker=new Tracker({gaid:"UA-272662-1",scroller:this.scroller}),this.infinite="true"==this.page.props.infinite?new InfiniteScroll(this.page,{scroller:this.scroller,tracker:this.tracker}):null,this.infinite&&(this.infinite.loader.loadCallbackStack.push((()=>{this.lazy=new Lazy,this.dynamicDeps.getDeps()})),this.infinite.loader.onMaxLoads=function(){}),this.actions=new UIActions({scroller:this.scroller,infinite:this.infinite})}isMobile(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||screen.width<=720||window.innerWidth<=720}isAdBlocked(){return!1}ieVersion(uaString){let _uaString=uaString||navigator.userAgent,match=/\b(MSIE |Trident.*?rv:|Edge\/)(\d+)/.exec(_uaString);return match?parseInt(match[2]):0}}var UI=new Main;function IE9Fallback(UI){for(var cssList=[],jsList=["polyfills/ofi.min.js","lib/smooth-scroll.polyfills.min.js","lib/polyfill.object-fit.min.js"],baseCSSdir=UI.is_standalone?"/styles/":"/app/themes/"+this.sitename+"/styles/",baseJSdir=UI.is_standalone?"/scripts/":"/app/themes/"+this.sitename+"/scripts/",i=0;i<cssList.length;i++)document.head.insertAdjacentHTML("beforeend",'<link rel="stylesheet" type="text/css" href="'+baseCSSdir+cssList[i]+'">');for(i=0;i<jsList.length;i++)document.head.insertAdjacentHTML("beforeend",'<script src="'+baseJSdir+jsList[i]+'"><\/script>')}UI.ieVersion>0&&UI.ieVersion<=10&&IE9Fallback(UI);